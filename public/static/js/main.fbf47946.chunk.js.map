{"version":3,"sources":["actions/getSearchResults.js","App.js","actions/registerRestaurant.js","actions/unregisterRestaurant.js","actions/getRegistrations.js","index.jsx","actions/url.js"],"names":["restaurantName","location","a","Promise","resolve","reject","options","method","url","URL_PREFIX","headers","body","JSON","stringify","request","error","response","statusCode","console","bodyObj","parse","title","results","getSearchResults","isMobile","test","navigator","userAgent","lat","localStorage","getItem","lon","getLocation","geolocation","log","getCurrentPosition","position","coords","latitude","longitude","setItem","err","App","onSearchRestaurantValueChange","event","setState","searchRestaurantValue","target","value","checkForChanges","bind","state","registrations","forEach","registration","result","find","i","track_id","restaurantId","isOpen","Audio","play","tabKey","alert","this","register","name","thinking","setImmediate","savedEmail","email","prompt","length","includes","registerRestaurant","unregister","confirm","unregisterRestaurant","search","searchWasClicked","getRestaurantDiv","image","overlay","address","searchPage","offline","className","onClick","src","onKeyChange","setTimeout","getRegistrations","setInterval","defaultActiveKey","id","style","fontSize","activeKey","onSelect","variant","eventKey","type","onChange","disabled","map","venue","restaurantImage","restaurantAddress","Component","emailAddress","object","positions","BOTTOM_CENTER","timeout","offset","transition","transitions","SCALE","Root","template","AlertTemplate","ReactDOM","render","document","getElementById","window","origin"],"mappings":"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","file":"static/js/main.fbf47946.chunk.js","sourcesContent":["\nimport request from 'request';\n\nimport URL_PREFIX from './url';\nasync function getSearchResults(restaurantName, location) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/search`,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        restaurantName,\n        location,\n      }),\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get registrations', error);\n          return reject('failed to get registrations');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to getSearchResults', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const { results } = JSON.parse(body);\n      return resolve(results);\n    });\n  });\n}\n\nexport default getSearchResults;\n","/* eslint-disable no-lone-blocks */\n/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport getSearchResults from './actions/getSearchResults';\nimport registerRestaurant from './actions/registerRestaurant';\nimport unregisterRestaurant from './actions/unregisterRestaurant';\n//import FacebookLogin from  'react-facebook-login/dist/facebook-login-render-props';\n//import login from './actions/login';\nimport getRegistrations from './actions/getRegistrations';\n//import { GoogleLogin } from 'react-google-login';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst location = {\n    lat: localStorage.getItem('lat') || '32.083758287943695',\n    lon: localStorage.getItem('lon') || '34.79441564530134',\n}\nfunction beep() {\n    var snd = new Audio(\"data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\");\n    snd.play();\n}\nfunction getLocation()\n{\n    if (navigator.geolocation)\n    {\n        console.log('calling getCurrentPosition')\n        navigator.geolocation.getCurrentPosition((position)=>{\n            location.lat=position.coords.latitude;\n            location.lon=position.coords.longitude;\n             localStorage.setItem('lat', location.lat);\n             localStorage.setItem('lon', location.lon);\n        },(err)=>{\n            console.log('calling getCurrentPosition got error:', err)\n        });\n    }\n    else{\n        console.log('no navigator.geolocation')\n    }\n}\n\nclass App extends Component {\n\n    constructor() {\n        super();\n        getLocation();\n        setTimeout(getLocation, 5000);\n        const searchRestaurantValue = localStorage.getItem('searchRestaurantValue') || '';\n        setTimeout(async ()=>{\n            const email = localStorage.getItem('email');\n            if (email && email.includes('@')) {\n                const registrations = await getRegistrations(email);\n                this.setState({ registrations });\n            }\n\n        },400)\n        this.state = {\n            searchRestaurantValue,\n            results:[],\n            registrations:[],\n            tabKey:'search',\n            searchWasClicked: false,\n            thinking: false\n        };\n        setInterval(this.checkForChanges,30000)\n    }\n    onSearchRestaurantValueChange = (event) => {\n        this.setState({ searchRestaurantValue: event.target.value });\n    }\n\n    checkForChanges = async() => {\n        const setState = this.setState.bind(this);\n        if (!this.state.registrations) return;\n        this.state.registrations.forEach(async (registration)=>{\n            const results = await getSearchResults(registration.restaurantName, { lat: registration.lat, lon: registration.lon });\n            const result = results.find(i => i.track_id === registration.restaurantId);\n            if (result && result.isOpen) {\n                beep();\n                setState({ tabKey: 'search' });\n                alert(`${registration.restaurantName} is now open`);\n            } else{\n                console.log('still close', registration.restaurantName)\n            }\n        })\n    }\n    register = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            console.log('about to register for restaurant:', name, restaurantId)\n            const savedEmail = localStorage.getItem('email');\n            const email = prompt('enter your email address to subscribe for this restaurant', savedEmail ? savedEmail : '');\n            if (!email || email.length===0 || !email.includes('@')){\n                alert('ilegal email address');\n                setState({ thinking:false });\n                return;\n            }\n            localStorage.setItem('email', email);\n            const registrations = await registerRestaurant(name, restaurantId, location, email);\n            console.log('registrations:', registrations);\n\n\n            setState({ thinking:false, registrations, tabKey: 'subscribtions' });\n        })\n    }\n\n    unregister = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            const savedEmail = localStorage.getItem('email');\n            if (confirm(\"Unsubscribe?\")){\n                const registrations = await unregisterRestaurant(name, restaurantId, location, savedEmail);\n                console.log('registrations:', registrations)\n                setState({ registrations,  thinking:false, });\n            }\n        })\n    }\n\n    search = async() => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            console.log('about to search for restaurant:', this.state.searchRestaurantValue)\n            localStorage.setItem('searchRestaurantValue', this.state.searchRestaurantValue);\n            const results = await getSearchResults(this.state.searchRestaurantValue, location);\n            console.log('results')\n            console.log(results)\n            setState({ results, searchWasClicked:true, thinking:false });\n        })\n\n\n    }\n\n    getRestaurantDiv = (title, image, overlay,restaurantId, address, isOpen, searchPage, email)=>{\n        //console.log('getRestaurantDiv', title, image, overlay,restaurantId, address, isOpen, searchPage)\n\n        const offline = !isOpen;\n\n        return <div key={title} className={`col-xs-6 restaurant-result-div ${offline ?'offline':''} ${ isMobile ? 'mobile-width' : ''}`} onClick={()=> offline && searchPage ? this.register(title, restaurantId) : !searchPage ? this.unregister(title, restaurantId) : ()=>{}}>\n            <div>{title}</div>\n            <div> <img src={image}/></div>\n            <div>{address}</div>\n            {overlay && overlay.length ? <div className=\"overlay\">{overlay}</div> : <span></span>}\n            {offline && searchPage ? <div className=\"action-prompt\">Click to Subscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"action-prompt\">Click to Unsubscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"email-data\">({email})</div>: <span></span> }\n        </div>\n    }\n    onKeyChange = (tabKey)=>{\n        this.setState({tabKey });\n    };\n    render() {\n\n        // const google = (<GoogleLogin\n        //\n        //     clientId={GOOGLE_CLIENT_ID}\n        //     onSuccess={this.googleResponse}\n        //     onFailure={this.onFailure}\n        //     render={renderProps => (\n        //         <div className=\"login-button login-button-google\" onClick={renderProps.onClick}> LOGIN WITH GOOGLE</div>\n        //     )}\n        // />);\n        //\n        // const facebook = showFB ? (<FacebookLogin\n        //     disableMobileRedirect={true}\n        //     appId={FACEBOOK_APP_ID}\n        //     autoLoad={false}\n        //     fields=\"name,email,picture\"\n        //     callback={this.facebookResponse}\n        //     render={renderProps => (\n        //         <div id=\"fbButton\" className=\"login-button login-button-fb\" onClick={renderProps.onClick}> LOGIN WITH FACEBOOK</div>\n        //     )}\n        // />) :  <div className=\"login-button login-button-fb\" onClick={()=>{ window.location = httpsUrl}}> LOGIN WITH FACEBOOK</div>;\n\n        return (\n            <div>\n                <div>\n                    <h1><u>Wolt Helper</u></h1>\n                </div>\n                <Tabs defaultActiveKey=\"search\" id=\"uncontrolled-tab-example\" style={{fontSize: isMobile ? \"0.8em\" : \"1em\"}} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                    <Tab eventKey=\"search\" title=\"search\" >\n                        <div>\n                            <div id=\"search-restaurant-div\">\n\n                                <input type=\"text\" id=\"search-restaurant-input\" value={this.state.searchRestaurantValue} onChange={this.onSearchRestaurantValueChange} />\n                                <button id=\"search-restaurant-button\" onClick={this.search} disabled={this.state.searchRestaurantValue.length === 0}>search</button>\n                            </div>\n                            <div id=\"search-results\">\n                                { this.state.searchWasClicked ? <div>\n                                    {this.state.results.length} restaurants found.\n                                </div> : <div></div>}\n                                <div className=\"row\">\n                                    {\n                                        this.state.results.map((result) =>{\n                                            const {title, image: {url: image}, overlay, track_id: restaurantId, venue: { address}, isOpen }= result;\n                                            return this.getRestaurantDiv(title, image, overlay,restaurantId, address, isOpen, true);\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </Tab>\n                    <Tab eventKey=\"subscribtions\" title=\"subscribtions\" >\n                        <div>\n                            <div>\n                                {this.state.registrations.length} subscribtions.\n                            </div>\n                            <div className=\"row\">\n                                {\n                                    this.state.registrations.map(registration =>{\n                                        const { restaurantName: title, restaurantImage: image, restaurantId, restaurantAddress: address, email } = registration;\n                                         return this.getRestaurantDiv(title, image, null,restaurantId, address, false, false, email);\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </Tab>\n                </Tabs>\n\n                {this.state.thinking ? <div className=\"sivivator\"> <img src='loading.gif'/></div>: <div></div>}\n\n            </div>);\n\n    }\n}\n\nexport default App;\n\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function registerRestaurant(restaurantName, restaurantId, location, emailAddress) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location,\n    emailAddress\n  });\n  const url = `${URL_PREFIX}/register`;\n\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get registrations', error);\n          return reject('failed to get registrations');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to registerRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body).registrations);\n    });\n  });\n}\n\nexport default registerRestaurant;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function unregisterRestaurant(restaurantName, restaurantId, location, emailAddress) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location,\n    emailAddress\n  });\n  const url = `${URL_PREFIX}/unregister`;\n  console.log('unregisterRestaurant body',body)\n  console.log('unregisterRestaurant url',url)\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get registrations', error);\n          return reject('failed to get registrations');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to unregisterRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body).registrations);\n    });\n  });\n}\n\nexport default unregisterRestaurant;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function getRegistrations(email) {\n  const body = JSON.stringify({\n    email\n  });\n  const url = `${URL_PREFIX}/registrations`;\n\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get registrations', error);\n          return reject('failed to get registrations');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to unregisterRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body).registrations);\n    });\n  });\n}\n\nexport default getRegistrations;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert';\nimport AlertTemplate from 'react-alert-template-basic';\n\nimport './style/app.css';\n\nconst options = {\n    // you can also just use 'bottom center'\n    position: positions.BOTTOM_CENTER,\n    timeout: 3000,\n    offset: '30px',\n    // you can also just use 'scale'\n    transition: transitions.SCALE\n}\n\nconst Root = () => (\n    <AlertProvider template={AlertTemplate} {...options}>\n        <App />\n    </AlertProvider>\n)\n\n\nReactDOM.render(\n    <Root/>,\n  document.getElementById('root')\n);\n","const URL_PREFIX = window.location.origin.includes('localhost') ? 'https://wolt-helper.herokuapp.com' : window.location.origin;\n\nexport default URL_PREFIX\n"],"sourceRoot":""}