{"version":3,"sources":["actions/getSearchResults.js","actions/getSubscriptions.js","App.js","actions/subscribeRestaurant.js","actions/unsubscribeRestaurant.js","index.jsx","actions/url.js"],"names":["restaurantName","location","a","Promise","resolve","reject","options","method","url","URL_PREFIX","headers","body","JSON","stringify","request","error","response","statusCode","console","bodyObj","parse","title","results","getSearchResults","provider","token","object","parsedBody","log","localStorage","setItem","userContext","email","subscriptions","getSubscriptions","isMobile","test","navigator","userAgent","lat","getItem","lon","getLocation","geolocation","getCurrentPosition","position","coords","latitude","longitude","err","App","onSearchRestaurantValueChange","event","setState","searchRestaurantValue","target","value","checkForChanges","bind","state","forEach","subscription","result","find","i","track_id","restaurantId","isOpen","Audio","play","tabKey","alert","this","subscribe","name","thinking","setImmediate","subscribeRestaurant","unsubscribe","confirm","unsubscribeRestaurant","search","searchWasClicked","getRestaurantDiv","image","overlay","address","searchPage","offline","className","onClick","src","length","onKeyChange","onLoginFailure","performLogin","issueDate","Date","removeItem","googleResponse","accessToken","setTimeout","authData","Boolean","google","clientId","onSuccess","onFailure","render","renderProps","id","defaultActiveKey","style","fontSize","activeKey","onSelect","variant","eventKey","type","onChange","disabled","map","venue","restaurantImage","restaurantAddress","Component","positions","BOTTOM_CENTER","timeout","offset","transition","transitions","SCALE","Root","template","AlertTemplate","ReactDOM","document","getElementById","window","origin","includes"],"mappings":"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","file":"static/js/main.842dd442.chunk.js","sourcesContent":["\nimport request from 'request';\n\nimport URL_PREFIX from './url';\nasync function getSearchResults(restaurantName, location) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/search`,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        restaurantName,\n        location,\n      }),\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to getSearchResults', error);\n          return reject('failed to get getSearchResults');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to getSearchResults', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const { results } = JSON.parse(body);\n      return resolve(results);\n    });\n  });\n}\n\nexport default getSearchResults;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function getSubscriptions(provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      url: `${URL_PREFIX}/subscriptions`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      }\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get getSubscriptions', error);\n          return reject('failed to get getSubscriptions');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to getSubscriptions data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      console.log('getSubscriptions, parsedBody',parsedBody)\n      localStorage.setItem('email', parsedBody.userContext.email);\n      return resolve(parsedBody.subscriptions);\n    });\n  });\n}\n\nexport default getSubscriptions;\n","/* eslint-disable no-lone-blocks */\n/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport getSearchResults from './actions/getSearchResults';\nimport subscribeRestaurant from './actions/subscribeRestaurant';\nimport unsubscribeRestaurant from './actions/unsubscribeRestaurant';\nimport getSubscriptions from './actions/getSubscriptions';\nimport FacebookLogin from  'react-facebook-login/dist/facebook-login-render-props';\nconst GOOGLE_CLIENT_ID= '819855379342-uer8pqn2q9gldofcnqaa7cremr0427d1.apps.googleusercontent.com';\nconst FACEBOOK_APP_ID= '4683699325055690';\n\nimport { GoogleLogin } from 'react-google-login';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst location = {\n    lat: localStorage.getItem('lat') || '32.083758287943695',\n    lon: localStorage.getItem('lon') || '34.79441564530134',\n}\nfunction beep() {\n    var snd = new Audio(\"data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\");\n    snd.play();\n}\n\nfunction getLocation(){\n    if (navigator.geolocation)\n    {\n        console.log('calling getCurrentPosition')\n        navigator.geolocation.getCurrentPosition((position)=>{\n            location.lat=position.coords.latitude;\n            location.lon=position.coords.longitude;\n             localStorage.setItem('lat', location.lat);\n             localStorage.setItem('lon', location.lon);\n        },(err)=>{\n            console.log('calling getCurrentPosition got error:', err)\n        });\n    }\n    else{\n        console.log('no navigator.geolocation')\n    }\n}\n\nclass App extends Component {\n\n    constructor() {\n        super();\n        setTimeout(getLocation, 500);\n        const searchRestaurantValue = localStorage.getItem('searchRestaurantValue') || '';\n        const email = localStorage.getItem('email');\n        setTimeout(async ()=>{\n            const authData = localStorage.getItem('authData');\n            if (authData){\n                const {provider, token } = JSON.parse(authData);\n                if (provider && token) {\n                    const subscriptions = await getSubscriptions(provider, token)\n                    this.setState({ subscriptions });\n                }\n            }\n        },400)\n        this.state = {\n            email,\n            searchRestaurantValue,\n            results:[],\n            subscriptions:[],\n            tabKey:'search',\n            searchWasClicked: false,\n            thinking: false\n        };\n        //setInterval(this.checkForChanges,30000)\n    }\n    onSearchRestaurantValueChange = (event) => {\n        this.setState({ searchRestaurantValue: event.target.value });\n    }\n\n    checkForChanges = async() => {\n        const setState = this.setState.bind(this);\n        if (!this.state.subscriptions) return;\n        this.state.subscriptions.forEach(async (subscription)=>{\n            const results = await getSearchResults(subscription.restaurantName, { lat: subscription.lat, lon: subscription.lon });\n            const result = results.find(i => i.track_id === subscription.restaurantId);\n            if (result && result.isOpen) {\n                beep();\n                setState({ tabKey: 'search' });\n                alert(`${subscription.restaurantName} is now open`);\n            } else{\n                console.log('still close', subscription.restaurantName)\n            }\n        })\n    }\n    subscribe = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        const {provider, token } = JSON.parse(localStorage.getItem('authData'));\n\n        setImmediate(async ()=>{\n            console.log('about to subscribe for restaurant:', name, restaurantId)\n            const subscriptions = await subscribeRestaurant(name, restaurantId, location, provider, token);\n            console.log('subscriptions:', subscriptions);\n            setState({ thinking:false, subscriptions, tabKey: 'subscriptions' });\n        })\n    }\n    unsubscribe = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        const {provider, token } = JSON.parse(localStorage.getItem('authData'));\n\n        setImmediate(async ()=>{\n            if (confirm(\"Unsubscribe?\")){\n                console.log('about to unsubscribe for restaurant:', name, restaurantId);\n                const subscriptions = await unsubscribeRestaurant(name, restaurantId, location, provider, token);\n                console.log('subscriptions:', subscriptions);\n                setState({ thinking:false, subscriptions, tabKey: 'subscriptions' });\n            }else{\n                setState({ thinking:false });\n            }\n\n\n        })\n    }\n\n    search = async() => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            console.log('about to search for restaurant:', this.state.searchRestaurantValue)\n            localStorage.setItem('searchRestaurantValue', this.state.searchRestaurantValue);\n            const results = await getSearchResults(this.state.searchRestaurantValue, location);\n            setState({ results, searchWasClicked:true, thinking:false });\n        })\n    }\n\n    getRestaurantDiv = (title, image, overlay,restaurantId, address, isOpen, searchPage, email)=>{\n        //console.log('getRestaurantDiv', title, image, overlay,restaurantId, address, isOpen, searchPage)\n        const offline = !isOpen;\n\n        return <div key={title} className={`col-xs-6 restaurant-result-div ${offline ?'offline':''} ${ isMobile ? 'mobile-width' : ''}`} onClick={()=> offline && searchPage ? this.subscribe(title, restaurantId) : !searchPage ? this.unsubscribe(title, restaurantId) : ()=>{}}>\n            <div>{title}</div>\n            <div> <img src={image}/></div>\n            <div>{address}</div>\n            {overlay && overlay.length ? <div className=\"overlay\">{overlay}</div> : <span></span>}\n            {offline && searchPage ? <div className=\"action-prompt\">Click to Subscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"action-prompt\">Click to Unsubscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"email-data\">({email})</div>: <span></span> }\n        </div>\n    }\n    onKeyChange = (tabKey)=>{\n        this.setState({tabKey });\n    };\n    onLoginFailure = (error) => {\n        console.error('App onFailure', error);\n       // alert('failed to login1');\n    };\n    performLogin = async (provider, token) => {\n        try{\n            const subscriptions = await getSubscriptions(provider, token)\n            this.setState({ subscriptions });\n            const issueDate  = new Date();\n            localStorage.setItem('authData', JSON.stringify({provider, token, issueDate }));\n            console.log('performLogin result',result)\n        } catch(error) {\n            localStorage.removeItem('authData');\n            alert('failed to login2');\n        }\n    };\n\n    googleResponse = (response) => {\n        if (response.accessToken){\n            this.performLogin('google', response.accessToken);\n        }else{\n            this.onLoginFailure('login failed')\n        }\n\n    };\n    render() {\n        const loggedIn = Boolean(this.state.email);\n        if (!loggedIn){\n            const google = (<GoogleLogin\n                clientId={GOOGLE_CLIENT_ID}\n                onSuccess={this.googleResponse}\n                onFailure={this.onLoginFailure}\n                render={renderProps => (\n                    <div className=\"login-button login-button-google\" onClick={renderProps.onClick}> LOGIN WITH GOOGLE</div>\n                )}\n            />);\n            //\n            // const facebook = showFB ? (<FacebookLogin\n            //     disableMobileRedirect={true}\n            //     appId={FACEBOOK_APP_ID}\n            //     autoLoad={false}\n            //     fields=\"name,email,picture\"\n            //     callback={this.facebookResponse}\n            //     render={renderProps => (\n            //         <div id=\"fbButton\" className=\"login-button login-button-fb\" onClick={renderProps.onClick}> LOGIN WITH FACEBOOK</div>\n            //     )}\n            // />) :  <div className=\"login-button login-button-fb\" onClick={()=>{ window.location = httpsUrl}}> LOGIN WITH FACEBOOK</div>;\n\n            return <div id=\"login-page\">\n                <div id=\"login-page-header\">\n                    login page\n                </div>\n                <div id=\"login-body\">\n                    {google}\n                </div>\n            </div>\n        }\n\n\n        return (\n            <div>\n                <div id=\"login-data\">\n                    {this.state.email}<br/>\n                    <span id=\"log-out-button\" onClick={()=>{\n                        localStorage.removeItem('email');\n                        this.setState({ email: null});\n                    }}>log out</span>\n                </div>\n                <div>\n                    <h1><u>Wolt Helper</u></h1>\n                </div>\n                <Tabs defaultActiveKey=\"search\" id=\"uncontrolled-tab-example\" style={{fontSize: isMobile ? \"0.8em\" : \"1em\"}} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                    <Tab eventKey=\"search\" title=\"search\" >\n                        <div>\n                            <div id=\"search-restaurant-div\">\n\n                                <input type=\"text\" id=\"search-restaurant-input\" value={this.state.searchRestaurantValue} onChange={this.onSearchRestaurantValueChange} />\n                                <button id=\"search-restaurant-button\" onClick={this.search} disabled={this.state.searchRestaurantValue.length === 0}>search</button>\n                            </div>\n                            <div id=\"search-results\">\n                                { this.state.searchWasClicked ? <div>\n                                    {this.state.results.length} restaurants found.\n                                </div> : <div></div>}\n                                <div className=\"row\">\n                                    {\n                                        this.state.results.map((result) =>{\n                                            const {title, image: {url: image}, overlay, track_id: restaurantId, venue: { address}, isOpen }= result;\n                                            return this.getRestaurantDiv(title, image, overlay,restaurantId, address, isOpen, true);\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </Tab>\n                    <Tab eventKey=\"subscriptions\" title=\"subscriptions\" >\n                        <div>\n                            <div>\n                                {this.state.subscriptions.length} subscriptions\n                            </div>\n                            <div className=\"row\">\n                                {\n                                    this.state.subscriptions.map(subscription =>{\n                                        const { restaurantName: title, restaurantImage: image, restaurantId, restaurantAddress: address, email } = subscription;\n                                         return this.getRestaurantDiv(title, image, null,restaurantId, address, false, false, email);\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </Tab>\n                </Tabs>\n\n                {this.state.thinking ? <div className=\"sivivator\"> <img src='loading.gif'/></div>: <div></div>}\n\n            </div>);\n\n    }\n}\n\nexport default App;\n\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function subscribeRestaurant(restaurantName, restaurantId, location, provider, token) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location\n  });\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/subscriptions`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get subscribeRestaurant', error);\n          return reject('failed to get subscribeRestaurant');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to subscribeRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      console.log('subscribeRestaurant, parsedBody',parsedBody)\n      localStorage.setItem('email', parsedBody.userContext.email);\n      return resolve(parsedBody.subscriptions);\n    });\n  });\n}\n\nexport default subscribeRestaurant;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function unsubscribeRestaurant(restaurantName, restaurantId, location, provider, token) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location,\n  });\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/unsubscribe`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get unsubscribeRestaurant', error);\n          return reject('failed to get unsubscribeRestaurant');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to unsubscribeRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      console.log('unsubscribeRestaurant, parsedBody',parsedBody)\n      localStorage.setItem('email', parsedBody.userContext.email);\n      return resolve(parsedBody.subscriptions);\n    });\n  });\n}\n\nexport default unsubscribeRestaurant;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert';\nimport AlertTemplate from 'react-alert-template-basic';\n\nimport './style/app.css';\n\nconst options = {\n    // you can also just use 'bottom center'\n    position: positions.BOTTOM_CENTER,\n    timeout: 3000,\n    offset: '30px',\n    // you can also just use 'scale'\n    transition: transitions.SCALE\n}\n\nconst Root = () => (\n    <AlertProvider template={AlertTemplate} {...options}>\n        <App />\n    </AlertProvider>\n)\n\n\nReactDOM.render(\n    <Root/>,\n  document.getElementById('root')\n);\n","const URL_PREFIX = window.location.origin.includes('localhost') ? 'http://localhost:5002' : window.location.origin; //https://wolt-wrapper.herokuapp.com'\n\nexport default URL_PREFIX\n"],"sourceRoot":""}