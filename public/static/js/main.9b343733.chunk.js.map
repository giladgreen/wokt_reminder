{"version":3,"sources":["actions/getSearchResults.js","actions/getSubscriptions.js","App.js","actions/subscribeRestaurant.js","actions/unsubscribeRestaurant.js","index.jsx","actions/url.js"],"names":["restaurantName","location","a","Promise","resolve","reject","options","method","url","URL_PREFIX","headers","body","JSON","stringify","request","error","response","statusCode","console","bodyObj","parse","title","results","getSearchResults","provider","token","object","parsedBody","getSubscriptions","isMobile","test","navigator","userAgent","lat","localStorage","getItem","lon","getLocation","geolocation","log","getCurrentPosition","position","coords","latitude","longitude","setItem","err","App","onSearchRestaurantValueChange","event","setState","searchRestaurantValue","target","value","checkForChanges","bind","state","subscriptions","forEach","subscription","result","find","i","track_id","restaurantId","isOpen","Audio","play","tabKey","alert","this","subscribe","name","thinking","setImmediate","subscribeRestaurant","unsubscribe","confirm","unsubscribeRestaurant","search","searchWasClicked","getRestaurantDiv","image","overlay","address","searchPage","email","offline","className","onClick","src","length","onKeyChange","onLoginFailure","performLogin","userContext","issueDate","Date","removeItem","googleResponse","accessToken","setTimeout","authData","Boolean","google","clientId","onSuccess","onFailure","render","renderProps","id","defaultActiveKey","style","fontSize","activeKey","onSelect","variant","eventKey","type","onChange","disabled","map","venue","restaurantImage","restaurantAddress","Component","positions","BOTTOM_CENTER","timeout","offset","transition","transitions","SCALE","Root","template","AlertTemplate","ReactDOM","document","getElementById","window","origin","includes"],"mappings":"mNAIA,WAAgCA,EAAgBC,GAAhD,SAAAC,EAAA,+EACS,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAU,CACdC,OAAQ,OACRC,IAAI,GAAD,OAAKC,IAAL,WACHC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBb,iBACAC,cAIJa,IAAQR,GAAS,SAACS,EAAOC,EAAUL,GACjC,GAAII,GAASC,EAASC,YAAc,IAAK,CACvC,GAAIF,EAEF,OADAG,QAAQH,MAAM,8CAA+CA,GACtDV,EAAO,kCAEhB,IAAMc,EAAUP,KAAKQ,MAAMT,GAE3B,OADAO,QAAQH,MAAM,6BAA8BI,GACrCd,EAAOc,EAAQE,OAExB,IAAQC,EAAYV,KAAKQ,MAAMT,GAAvBW,QACR,OAAOlB,EAAQkB,UAzBrB,4C,sBA8BeC,I,iLC9Bf,WAAgCC,EAAUC,GAA1C,SAAAvB,EAAA,+EACS,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAU,CACdC,OAAQ,MACRC,IAAI,GAAD,OAAKC,IAAL,kBACHC,QAAS,CACPc,WACA,eAAgBC,EAChB,eAAgB,qBAIpBX,IAAQR,GAAS,SAACS,EAAOC,EAAUL,GACjC,GAAII,GAASC,EAASC,YAAc,IAAK,CACvC,GAAIF,EAEF,OADAG,QAAQH,MAAM,kDAAmDA,GAC1DV,EAAO,kCAEhB,IAAMc,SAAiBR,IAASe,OAASf,EAAOC,KAAKQ,MAAMT,GAE3D,OADAO,QAAQH,MAAM,kCAAmCI,GAC1Cd,EAAOc,EAAQE,OAExB,IAAMM,EAAaf,KAAKQ,MAAMT,GAC9B,OAAOP,EAAQuB,UAvBrB,4C,sBA4BeC,I,2PCjBTC,EAAa,iEAAiEC,KAAKC,UAAUC,WAC7F/B,EAAW,CACbgC,IAAKC,aAAaC,QAAQ,QAAU,qBACpCC,IAAKF,aAAaC,QAAQ,QAAU,qBAOxC,SAASE,IACDN,UAAUO,aAEVpB,QAAQqB,IAAI,8BACZR,UAAUO,YAAYE,oBAAmB,SAACC,GACtCxC,EAASgC,IAAIQ,EAASC,OAAOC,SAC7B1C,EAASmC,IAAIK,EAASC,OAAOE,UAC5BV,aAAaW,QAAQ,MAAO5C,EAASgC,KACrCC,aAAaW,QAAQ,MAAO5C,EAASmC,QACxC,SAACU,GACC5B,QAAQqB,IAAI,wCAAyCO,OAIzD5B,QAAQqB,IAAI,4B,IAIdQ,E,kDAEF,aAAe,IAAD,uBACV,gBAwBJC,8BAAgC,SAACC,GAC7B,EAAKC,SAAS,CAAEC,sBAAuBF,EAAMG,OAAOC,SA1B1C,EA6BdC,gBA7Bc,sBA6BI,4BAAApD,EAAA,yDACRgD,EAAW,EAAKA,SAASK,KAAd,gBACZ,EAAKC,MAAMC,cAFF,iDAGd,EAAKD,MAAMC,cAAcC,QAAzB,uCAAiC,WAAOC,GAAP,iBAAAzD,EAAA,sEACPqB,YAAiBoC,EAAa3D,eAAgB,CAAEiC,IAAK0B,EAAa1B,IAAKG,IAAKuB,EAAavB,MADlF,OACvBd,EADuB,QAEvBsC,EAAStC,EAAQuC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,WAAaJ,EAAaK,kBAC/CJ,EAAOK,QA3DnB,IAAIC,MAAM,0/HAChBC,OA4DQjB,EAAS,CAAEkB,OAAQ,WACnBC,MAAM,GAAD,OAAIV,EAAa3D,eAAjB,kBAELkB,QAAQqB,IAAI,cAAeoB,EAAa3D,gBARf,2CAAjC,kCAAAsE,KAAA,gBAHc,2CA7BJ,EA4CdC,UA5Cc,uCA4CF,WAAMC,EAAMR,GAAZ,qBAAA9D,EAAA,uDACFgD,EAAW,EAAKA,SAASK,KAAd,iBACR,CAAEkB,UAAS,IAFZ,EAGmB7D,KAAKQ,MAAMc,aAAaC,QAAQ,aAApDX,EAHC,EAGDA,SAAUC,EAHT,EAGSA,MAEjBiD,EAAY,sBAAC,4BAAAxE,EAAA,6DACTgB,QAAQqB,IAAI,qCAAsCiC,EAAMR,GAD/C,SAEmBW,YAAoBH,EAAMR,EAAc/D,EAAUuB,EAAUC,GAF/E,OAEHgC,EAFG,OAGTvC,QAAQqB,IAAI,iBAAkBkB,GAC9BP,EAAS,CAAEuB,UAAS,EAAOhB,gBAAeW,OAAQ,kBAJzC,4CALL,2CA5CE,0DAwDdQ,YAxDc,uCAwDA,WAAMJ,EAAMR,GAAZ,qBAAA9D,EAAA,uDACJgD,EAAW,EAAKA,SAASK,KAAd,iBACR,CAAEkB,UAAS,IAFV,EAGiB7D,KAAKQ,MAAMc,aAAaC,QAAQ,aAApDX,EAHG,EAGHA,SAAUC,EAHP,EAGOA,MAEjBiD,EAAY,sBAAC,4BAAAxE,EAAA,0DACL2E,QAAQ,gBADH,uBAEL3D,QAAQqB,IAAI,uCAAwCiC,EAAMR,GAFrD,SAGuBc,YAAsBN,EAAMR,EAAc/D,EAAUuB,EAAUC,GAHrF,OAGCgC,EAHD,OAILvC,QAAQqB,IAAI,iBAAkBkB,GAC9BP,EAAS,CAAEuB,UAAS,EAAOhB,gBAAeW,OAAQ,kBAL7C,uBAOLlB,EAAS,CAAEuB,UAAS,IAPf,6CALH,2CAxDA,0DA2EdM,OA3Ec,sBA2EL,4BAAA7E,EAAA,uDACCgD,EAAW,EAAKA,SAASK,KAAd,iBACR,CAAEkB,UAAS,IACpBC,EAAY,sBAAC,4BAAAxE,EAAA,6DACTgB,QAAQqB,IAAI,kCAAmC,EAAKiB,MAAML,uBAC1DjB,aAAaW,QAAQ,wBAAyB,EAAKW,MAAML,uBAFhD,SAGa5B,YAAiB,EAAKiC,MAAML,sBAAuBlD,GAHhE,OAGHqB,EAHG,OAIT4B,EAAS,CAAE5B,UAAS0D,kBAAiB,EAAMP,UAAS,IAJ3C,4CAHR,2CA3EK,EAsFdQ,iBAAmB,SAAC5D,EAAO6D,EAAOC,EAAQnB,EAAcoB,EAASnB,EAAQoB,EAAYC,GAEjF,IAAMC,GAAWtB,EAEjB,OAAO,sBAAiBuB,UAAS,yCAAoCD,EAAS,UAAU,GAAvD,YAA8D1D,EAAW,eAAiB,IAAM4D,QAAS,kBAAKF,GAAWF,EAAa,EAAKd,UAAUlD,EAAO2C,GAAiBqB,EAAqD,aAAxC,EAAKT,YAAYvD,EAAO2C,IAA5O,UACH,8BAAM3C,IACN,oCAAM,qBAAKqE,IAAKR,OAChB,8BAAME,IACLD,GAAWA,EAAQQ,OAAS,qBAAKH,UAAU,UAAf,SAA0BL,IAAiB,yBACvEI,GAAWF,EAAa,qBAAKG,UAAU,gBAAf,gCAAyD,yBAChFH,EAAwE,yBAA3D,qBAAKG,UAAU,gBAAf,kCACbH,EAA0D,yBAA7C,sBAAKG,UAAU,aAAf,cAA8BF,EAA9B,SAPFjE,IA1FP,EAoGduE,YAAc,SAACxB,GACX,EAAKlB,SAAS,CAACkB,YArGL,EAuGdyB,eAAiB,SAAC9E,GACdG,QAAQH,MAAM,gBAAiBA,IAxGrB,EA0Gd+E,aA1Gc,uCA0GC,WAAOtE,EAAUC,GAAjB,eAAAvB,EAAA,uDACLgD,EAAW,EAAKA,SAASK,KAAd,iBACR,CAAEkB,UAAS,IACpBC,EAAY,sBAAC,kCAAAxE,EAAA,+EAEsC0B,YAAiBJ,EAAUC,GAFjE,gBAEEgC,EAFF,EAEEA,cAAesC,EAFjB,EAEiBA,YACtB,EAAK7C,SAAS,CAAEO,gBAAe6B,MAAOS,EAAYT,MAAOb,UAAS,IAC5DuB,EAAa,IAAIC,KACvB/D,aAAaW,QAAQ,WAAYjC,KAAKC,UAAU,CAACW,WAAUC,QAAOuE,eAClE9D,aAAaW,QAAQ,QAASkD,EAAYT,OANrC,kDAQLpD,aAAagE,WAAW,YACxBhF,QAAQqB,IAAI,QAAZ,MACA8B,MAAM,mBACNnB,EAAS,CAAEuB,UAAS,IAXf,2DAHF,2CA1GD,0DAgId0B,eAAiB,SAACnF,GACVA,EAASoF,YACT,EAAKN,aAAa,SAAU9E,EAASoF,aAErC,EAAKP,eAAe,iBAlIxBQ,WAAWhE,EAAa,KACxB,IAAMc,EAAwBjB,aAAaC,QAAQ,0BAA4B,GAHrE,OAIVkE,WAAU,sBAAC,wCAAAnG,EAAA,2DACDoG,EAAWpE,aAAaC,QAAQ,aAD/B,sBAGwBvB,KAAKQ,MAAMkF,GAA/B9E,EAHJ,EAGIA,SAAUC,EAHd,EAGcA,OACbD,IAAYC,EAJb,iCAK8CG,YAAiBJ,EAAUC,GALzE,gBAKSgC,EALT,EAKSA,cAAesC,EALxB,EAKwBA,YACvB,EAAK7C,SAAS,CAAEO,gBAAe6B,MAAOS,EAAYT,QANnD,4CAST,KACF,EAAK9B,MAAQ,CACT8B,MAAO,KACPnC,wBACA7B,QAAQ,GACRmC,cAAc,GACdW,OAAO,SACPY,kBAAkB,EAClBP,UAAU,GArBJ,E,0CAwId,WAAU,IAAD,OAGL,GAFAvD,QAAQqB,IAAI,iBAAkB+B,KAAKd,QAClB+C,QAAQjC,KAAKd,MAAM8B,OACtB,CACV,IAAMkB,EAAU,cAAC,cAAD,CACZC,SAlLQ,0EAmLRC,UAAWpC,KAAK6B,eAChBQ,UAAWrC,KAAKuB,eAChBe,OAAQ,SAAAC,GAAW,OACf,qBAAKrB,UAAU,mCAAmCC,QAASoB,EAAYpB,QAAvE,mCAeR,OAAO,sBAAKqB,GAAG,aAAR,UACH,qBAAKA,GAAG,oBAAR,wBAGA,qBAAKA,GAAG,aAAR,SACKN,OAMb,OACI,gCACI,sBAAKM,GAAG,aAAR,UACKxC,KAAKd,MAAM8B,MAAM,uBAClB,sBAAMwB,GAAG,iBAAiBrB,QAAS,WAC/BvD,aAAagE,WAAW,SACxB,EAAKhD,SAAS,CAAEoC,MAAO,QAF3B,wBAKJ,8BACI,6BAAI,gDAER,eAAC,IAAD,CAAMyB,iBAAiB,SAASD,GAAG,2BAA2BE,MAAO,CAACC,SAAUpF,EAAW,QAAU,OAAQqF,UAAW5C,KAAKd,MAAMY,OAAQ+C,SAAU7C,KAAKsB,YAAawB,QAAQ,QAA/K,UACI,cAAC,IAAD,CAAKC,SAAS,SAAShG,MAAM,SAA7B,SACI,gCACI,sBAAKyF,GAAG,wBAAR,UAEI,uBAAOQ,KAAK,OAAOR,GAAG,0BAA0BzD,MAAOiB,KAAKd,MAAML,sBAAuBoE,SAAUjD,KAAKtB,gCACxG,wBAAQ8D,GAAG,2BAA2BrB,QAASnB,KAAKS,OAAQyC,SAAsD,IAA5ClD,KAAKd,MAAML,sBAAsBwC,OAAvG,uBAEJ,sBAAKmB,GAAG,iBAAR,UACMxC,KAAKd,MAAMwB,iBAAmB,gCAC3BV,KAAKd,MAAMlC,QAAQqE,OADQ,yBAEvB,wBACT,qBAAKH,UAAU,MAAf,SAEQlB,KAAKd,MAAMlC,QAAQmG,KAAI,SAAC7D,GACpB,IAAOvC,EAA0FuC,EAA1FvC,MAAoB6D,EAAsEtB,EAAnFsB,MAAQ1E,IAAa2E,EAA8DvB,EAA9DuB,QAAmBnB,EAA2CJ,EAArDG,SAAiCqB,EAAoBxB,EAA7B8D,MAAStC,QAAUnB,EAAUL,EAAVK,OACvF,OAAO,EAAKgB,iBAAiB5D,EAAO6D,EAAOC,EAAQnB,EAAcoB,EAASnB,GAAQ,gBAO1G,cAAC,IAAD,CAAKoD,SAAS,gBAAgBhG,MAAM,gBAApC,SACI,gCACI,gCACKiD,KAAKd,MAAMC,cAAckC,OAD9B,oBAGA,qBAAKH,UAAU,MAAf,SAEQlB,KAAKd,MAAMC,cAAcgE,KAAI,SAAA9D,GACzB,IAAwBtC,EAAmFsC,EAAnG3D,eAAwCkF,EAA2DvB,EAA5EgE,gBAAwB3D,EAAoDL,EAApDK,aAAiCoB,EAAmBzB,EAAtCiE,kBAA4BtC,EAAU3B,EAAV2B,MAChG,OAAO,EAAKL,iBAAiB5D,EAAO6D,EAAO,KAAKlB,EAAcoB,GAAS,GAAO,EAAOE,gBAQ7GhB,KAAKd,MAAMiB,SAAW,sBAAKe,UAAU,YAAf,cAA4B,qBAAKsB,GAAG,gBAAgBpB,IAAI,mBAAuB,+B,GAjOpGmC,aAwOH9E,Q,iKC/Qf,WAAmC/C,EAAgBgE,EAAc/D,EAAUuB,EAAUC,GAArF,eAAAvB,EAAA,6DACQS,EAAOC,KAAKC,UAAU,CAC1Bb,iBACAgE,eACA/D,aAJJ,kBAOS,IAAIE,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAU,CACdC,OAAQ,OACRC,IAAI,GAAD,OAAKC,IAAL,kBACHC,QAAS,CACPc,WACA,eAAgBC,EAChB,eAAgB,oBAElBd,QAGFG,IAAQR,GAAS,SAACS,EAAOC,EAAUL,GACjC,GAAII,GAASC,EAASC,YAAc,IAAK,CACvC,GAAIF,EAEF,OADAG,QAAQH,MAAM,qDAAsDA,GAC7DV,EAAO,qCAEhB,IAAMc,SAAiBR,IAASe,OAASf,EAAOC,KAAKQ,MAAMT,GAE3D,OADAO,QAAQH,MAAM,qCAAsCI,GAC7Cd,EAAOc,EAAQE,OAExB,IAAMM,EAAaf,KAAKQ,MAAMT,GAG9B,OAFAO,QAAQqB,IAAI,kCAAkCZ,GAC9CO,aAAaW,QAAQ,QAASlB,EAAWoE,YAAYT,OAC9ClF,EAAQuB,EAAW8B,sBAhChC,4C,sBAqCekB,I,uLCrCf,WAAqC3E,EAAgBgE,EAAc/D,EAAUuB,EAAUC,GAAvF,eAAAvB,EAAA,6DACQS,EAAOC,KAAKC,UAAU,CAC1Bb,iBACAgE,eACA/D,aAJJ,kBAOS,IAAIE,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAU,CACdC,OAAQ,OACRC,IAAI,GAAD,OAAKC,IAAL,gBACHC,QAAS,CACPc,WACA,eAAgBC,EAChB,eAAgB,oBAElBd,QAGFG,IAAQR,GAAS,SAACS,EAAOC,EAAUL,GACjC,GAAII,GAASC,EAASC,YAAc,IAAK,CACvC,GAAIF,EAEF,OADAG,QAAQH,MAAM,uDAAwDA,GAC/DV,EAAO,uCAEhB,IAAMc,SAAiBR,IAASe,OAASf,EAAOC,KAAKQ,MAAMT,GAE3D,OADAO,QAAQH,MAAM,uCAAwCI,GAC/Cd,EAAOc,EAAQE,OAExB,IAAMM,EAAaf,KAAKQ,MAAMT,GAG9B,OAFAO,QAAQqB,IAAI,oCAAoCZ,GAChDO,aAAaW,QAAQ,QAASlB,EAAWoE,YAAYT,OAC9ClF,EAAQuB,EAAW8B,sBAhChC,4C,sBAqCeqB,I,4KCjCTxE,EAAU,CAEZmC,SAAUqF,IAAUC,cACpBC,QAAS,IACTC,OAAQ,OAERC,WAAYC,IAAYC,OAGtBC,EAAO,kBACT,cAAC,IAAD,yBAAeC,SAAUC,KAAmBjI,GAA5C,aACI,cAAC,IAAD,QAKRkI,IAAS5B,OACL,cAACyB,EAAD,IACFI,SAASC,eAAe,U,4UC1B1B,IAAMjI,EAAakI,OAAO1I,SAAS2I,OAAOC,SAAS,aAAe,qCAAuCF,OAAO1I,SAAS2I,OAE1GnI,O","file":"static/js/main.9b343733.chunk.js","sourcesContent":["\nimport request from 'request';\n\nimport URL_PREFIX from './url';\nasync function getSearchResults(restaurantName, location) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/search`,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        restaurantName,\n        location,\n      }),\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to getSearchResults', error);\n          return reject('failed to get getSearchResults');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to getSearchResults', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const { results } = JSON.parse(body);\n      return resolve(results);\n    });\n  });\n}\n\nexport default getSearchResults;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function getSubscriptions(provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      url: `${URL_PREFIX}/subscriptions`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      }\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get getSubscriptions', error);\n          return reject('failed to get getSubscriptions');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to getSubscriptions data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      return resolve(parsedBody);\n    });\n  });\n}\n\nexport default getSubscriptions;\n","/* eslint-disable no-lone-blocks */\n/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport getSearchResults from './actions/getSearchResults';\nimport subscribeRestaurant from './actions/subscribeRestaurant';\nimport unsubscribeRestaurant from './actions/unsubscribeRestaurant';\nimport getSubscriptions from './actions/getSubscriptions';\nimport FacebookLogin from  'react-facebook-login/dist/facebook-login-render-props';\nconst GOOGLE_CLIENT_ID= '79744445247-r6hecpeic6csggbl5c40isiqfshf15l7.apps.googleusercontent.com';\nconst FACEBOOK_APP_ID= '4683699325055690';\n\nimport { GoogleLogin } from 'react-google-login';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst location = {\n    lat: localStorage.getItem('lat') || '32.083758287943695',\n    lon: localStorage.getItem('lon') || '34.79441564530134',\n}\nfunction beep() {\n    var snd = new Audio(\"data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=\");\n    snd.play();\n}\n\nfunction getLocation(){\n    if (navigator.geolocation)\n    {\n        console.log('calling getCurrentPosition')\n        navigator.geolocation.getCurrentPosition((position)=>{\n            location.lat=position.coords.latitude;\n            location.lon=position.coords.longitude;\n             localStorage.setItem('lat', location.lat);\n             localStorage.setItem('lon', location.lon);\n        },(err)=>{\n            console.log('calling getCurrentPosition got error:', err)\n        });\n    }\n    else{\n        console.log('no navigator.geolocation')\n    }\n}\n\nclass App extends Component {\n\n    constructor() {\n        super();\n        setTimeout(getLocation, 500);\n        const searchRestaurantValue = localStorage.getItem('searchRestaurantValue') || '';\n        setTimeout(async ()=>{\n            const authData = localStorage.getItem('authData');\n            if (authData){\n                const {provider, token } = JSON.parse(authData);\n                if (provider && token) {\n                    const { subscriptions, userContext } = await getSubscriptions(provider, token)\n                    this.setState({ subscriptions, email: userContext.email });\n                }\n            }\n        },400)\n        this.state = {\n            email: null,\n            searchRestaurantValue,\n            results:[],\n            subscriptions:[],\n            tabKey:'search',\n            searchWasClicked: false,\n            thinking: false\n        };\n        //setInterval(this.checkForChanges,30000)\n    }\n    onSearchRestaurantValueChange = (event) => {\n        this.setState({ searchRestaurantValue: event.target.value });\n    }\n\n    checkForChanges = async() => {\n        const setState = this.setState.bind(this);\n        if (!this.state.subscriptions) return;\n        this.state.subscriptions.forEach(async (subscription)=>{\n            const results = await getSearchResults(subscription.restaurantName, { lat: subscription.lat, lon: subscription.lon });\n            const result = results.find(i => i.track_id === subscription.restaurantId);\n            if (result && result.isOpen) {\n                beep();\n                setState({ tabKey: 'search' });\n                alert(`${subscription.restaurantName} is now open`);\n            } else{\n                console.log('still close', subscription.restaurantName)\n            }\n        })\n    }\n    subscribe = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        const {provider, token } = JSON.parse(localStorage.getItem('authData'));\n\n        setImmediate(async ()=>{\n            console.log('about to subscribe for restaurant:', name, restaurantId)\n            const subscriptions = await subscribeRestaurant(name, restaurantId, location, provider, token);\n            console.log('subscriptions:', subscriptions);\n            setState({ thinking:false, subscriptions, tabKey: 'subscriptions' });\n        })\n    }\n    unsubscribe = async(name, restaurantId) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        const {provider, token } = JSON.parse(localStorage.getItem('authData'));\n\n        setImmediate(async ()=>{\n            if (confirm(\"Unsubscribe?\")){\n                console.log('about to unsubscribe for restaurant:', name, restaurantId);\n                const subscriptions = await unsubscribeRestaurant(name, restaurantId, location, provider, token);\n                console.log('subscriptions:', subscriptions);\n                setState({ thinking:false, subscriptions, tabKey: 'subscriptions' });\n            }else{\n                setState({ thinking:false });\n            }\n\n\n        })\n    }\n\n    search = async() => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            console.log('about to search for restaurant:', this.state.searchRestaurantValue)\n            localStorage.setItem('searchRestaurantValue', this.state.searchRestaurantValue);\n            const results = await getSearchResults(this.state.searchRestaurantValue, location);\n            setState({ results, searchWasClicked:true, thinking:false });\n        })\n    }\n\n    getRestaurantDiv = (title, image, overlay,restaurantId, address, isOpen, searchPage, email)=>{\n        //console.log('getRestaurantDiv', title, image, overlay,restaurantId, address, isOpen, searchPage)\n        const offline = !isOpen;\n\n        return <div key={title} className={`col-xs-6 restaurant-result-div ${offline ?'offline':''} ${ isMobile ? 'mobile-width' : ''}`} onClick={()=> offline && searchPage ? this.subscribe(title, restaurantId) : !searchPage ? this.unsubscribe(title, restaurantId) : ()=>{}}>\n            <div>{title}</div>\n            <div> <img src={image}/></div>\n            <div>{address}</div>\n            {overlay && overlay.length ? <div className=\"overlay\">{overlay}</div> : <span></span>}\n            {offline && searchPage ? <div className=\"action-prompt\">Click to Subscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"action-prompt\">Click to Unsubscribe</div>: <span></span> }\n            {!searchPage ? <div className=\"email-data\">({email})</div>: <span></span> }\n        </div>\n    }\n    onKeyChange = (tabKey)=>{\n        this.setState({tabKey });\n    };\n    onLoginFailure = (error) => {\n        console.error('App onFailure', error);\n    };\n    performLogin = async (provider, token) => {\n        const setState = this.setState.bind(this);\n        setState({ thinking:true });\n        setImmediate(async ()=>{\n            try{\n                const {subscriptions, userContext} = await getSubscriptions(provider, token);\n                this.setState({ subscriptions, email: userContext.email, thinking:false });\n                const issueDate  = new Date();\n                localStorage.setItem('authData', JSON.stringify({provider, token, issueDate }));\n                localStorage.setItem('email', userContext.email);\n            } catch(error) {\n                localStorage.removeItem('authData');\n                console.log('error', error)\n                alert('failed to login');\n                setState({ thinking:false });\n            }\n\n        })\n\n\n    };\n\n    googleResponse = (response) => {\n        if (response.accessToken){\n            this.performLogin('google', response.accessToken);\n        }else{\n            this.onLoginFailure('login failed')\n        }\n\n    };\n    render() {\n        console.log('render, state:', this.state)\n        const loggedIn = Boolean(this.state.email);\n        if (!loggedIn){\n            const google = (<GoogleLogin\n                clientId={GOOGLE_CLIENT_ID}\n                onSuccess={this.googleResponse}\n                onFailure={this.onLoginFailure}\n                render={renderProps => (\n                    <div className=\"login-button login-button-google\" onClick={renderProps.onClick}> LOGIN WITH GOOGLE</div>\n                )}\n            />);\n            //\n            // const facebook = showFB ? (<FacebookLogin\n            //     disableMobileRedirect={true}\n            //     appId={FACEBOOK_APP_ID}\n            //     autoLoad={false}\n            //     fields=\"name,email,picture\"\n            //     callback={this.facebookResponse}\n            //     render={renderProps => (\n            //         <div id=\"fbButton\" className=\"login-button login-button-fb\" onClick={renderProps.onClick}> LOGIN WITH FACEBOOK</div>\n            //     )}\n            // />) :  <div className=\"login-button login-button-fb\" onClick={()=>{ window.location = httpsUrl}}> LOGIN WITH FACEBOOK</div>;\n\n            return <div id=\"login-page\">\n                <div id=\"login-page-header\">\n                    login page\n                </div>\n                <div id=\"login-body\">\n                    {google}\n                </div>\n            </div>\n        }\n\n\n        return (\n            <div>\n                <div id=\"login-data\">\n                    {this.state.email}<br/>\n                    <span id=\"log-out-button\" onClick={()=>{\n                        localStorage.removeItem('email');\n                        this.setState({ email: null});\n                    }}>log out</span>\n                </div>\n                <div>\n                    <h1><u>Wolt Helper</u></h1>\n                </div>\n                <Tabs defaultActiveKey=\"search\" id=\"uncontrolled-tab-example\" style={{fontSize: isMobile ? \"0.8em\" : \"1em\"}} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                    <Tab eventKey=\"search\" title=\"search\" >\n                        <div>\n                            <div id=\"search-restaurant-div\">\n\n                                <input type=\"text\" id=\"search-restaurant-input\" value={this.state.searchRestaurantValue} onChange={this.onSearchRestaurantValueChange} />\n                                <button id=\"search-restaurant-button\" onClick={this.search} disabled={this.state.searchRestaurantValue.length === 0}>search</button>\n                            </div>\n                            <div id=\"search-results\">\n                                { this.state.searchWasClicked ? <div>\n                                    {this.state.results.length} restaurants found.\n                                </div> : <div></div>}\n                                <div className=\"row\">\n                                    {\n                                        this.state.results.map((result) =>{\n                                            const {title, image: {url: image}, overlay, track_id: restaurantId, venue: { address}, isOpen }= result;\n                                            return this.getRestaurantDiv(title, image, overlay,restaurantId, address, isOpen, true);\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </Tab>\n                    <Tab eventKey=\"subscriptions\" title=\"subscriptions\" >\n                        <div>\n                            <div>\n                                {this.state.subscriptions.length} subscriptions\n                            </div>\n                            <div className=\"row\">\n                                {\n                                    this.state.subscriptions.map(subscription =>{\n                                        const { restaurantName: title, restaurantImage: image, restaurantId, restaurantAddress: address, email } = subscription;\n                                         return this.getRestaurantDiv(title, image, null,restaurantId, address, false, false, email);\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </Tab>\n                </Tabs>\n\n                {this.state.thinking ? <div className=\"sivivator\"> <img id=\"sivivator-gif\" src='loading.gif'/></div>: <div></div>}\n\n            </div>);\n\n    }\n}\n\nexport default App;\n\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function subscribeRestaurant(restaurantName, restaurantId, location, provider, token) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location\n  });\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/subscriptions`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get subscribeRestaurant', error);\n          return reject('failed to get subscribeRestaurant');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to subscribeRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      console.log('subscribeRestaurant, parsedBody',parsedBody)\n      localStorage.setItem('email', parsedBody.userContext.email);\n      return resolve(parsedBody.subscriptions);\n    });\n  });\n}\n\nexport default subscribeRestaurant;\n","\nimport request from 'request';\nimport URL_PREFIX from './url';\n\nasync function unsubscribeRestaurant(restaurantName, restaurantId, location, provider, token) {\n  const body = JSON.stringify({\n    restaurantName,\n    restaurantId,\n    location,\n  });\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/unsubscribe`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body,\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get unsubscribeRestaurant', error);\n          return reject('failed to get unsubscribeRestaurant');\n        }\n        const bodyObj = typeof body === object ? body : JSON.parse(body);\n        console.error('failed to unsubscribeRestaurant data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const parsedBody = JSON.parse(body);\n      console.log('unsubscribeRestaurant, parsedBody',parsedBody)\n      localStorage.setItem('email', parsedBody.userContext.email);\n      return resolve(parsedBody.subscriptions);\n    });\n  });\n}\n\nexport default unsubscribeRestaurant;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert';\nimport AlertTemplate from 'react-alert-template-basic';\n\nimport './style/app.css';\n\nconst options = {\n    // you can also just use 'bottom center'\n    position: positions.BOTTOM_CENTER,\n    timeout: 3000,\n    offset: '30px',\n    // you can also just use 'scale'\n    transition: transitions.SCALE\n}\n\nconst Root = () => (\n    <AlertProvider template={AlertTemplate} {...options}>\n        <App />\n    </AlertProvider>\n)\n\n\nReactDOM.render(\n    <Root/>,\n  document.getElementById('root')\n);\n","const URL_PREFIX = window.location.origin.includes('localhost') ? 'https://wolt-wrapper.herokuapp.com' : window.location.origin; //https://wolt-wrapper.herokuapp.com' // 'http://localhost:5002'\n\nexport default URL_PREFIX\n"],"sourceRoot":""}